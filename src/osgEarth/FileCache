#ifndef OSGEARTH_FILE_CACHE_H
#define OSGEARTH_FILE_CACHE_H 1

#include <osgEarth/Common>

#include <osg/Image>
#include <osg/Shape>
#include <osg/Node>
#include <osgDB/ReaderWriter>


namespace osgEarth
{
    class OSGEARTH_EXPORT FileCache
    {
    public:

        FileCache(const std::string &_cache_path);

        osg::Image*        readImageFile(const std::string& filename, const osgDB::ReaderWriter::Options* options =NULL );
        osg::HeightField*  readHeightFieldFile(const std::string& filename, const osgDB::ReaderWriter::Options* options =NULL );
        osg::Node*         readNodeFile(const std::string& filename, const osgDB::ReaderWriter::Options* options =NULL );

        const std::string& getCachePath() const {return cache_path;}
        void setCachePath(const std::string &_cache_path) {cache_path = _cache_path;}

        void setOffline(bool offline) { _offline = offline;}
        const bool& getOffline() {return _offline;}

    private:
        std::string getCachedFilename(const std::string &filename);
        std::string getCachedImageFilename(const std::string &filename);
        std::string cache_path;
        std::string image_extension;
        bool _offline;
    };
}

#endif // OSGEARTH_FILE_CACHE_H